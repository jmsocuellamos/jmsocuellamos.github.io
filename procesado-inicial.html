<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Unidad 5 Procesado inicial | Modelos Estadísticos</title>
  <meta name="description" content="Unidad 5 Procesado inicial | Modelos Estadísticos" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Unidad 5 Procesado inicial | Modelos Estadísticos" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Unidad 5 Procesado inicial | Modelos Estadísticos" />
  
  
  



<meta name="date" content="2022-02-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="variabilidad.html"/>
<link rel="next" href="análisis-descriptivo-inicial.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://sites.google.com/umh.es/statistical-models" target="blank">Modelos Estadísticos</a></li>
<li><a href="./">J. Morales y A.M. Mayoral</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html"><i class="fa fa-check"></i>Antes de empezar</a>
<ul>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#conceptos-básicos-del-diseño-experimental"><i class="fa fa-check"></i>Conceptos básicos del diseño experimental</a>
<ul>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#objetivo-del-diseño-experimental"><i class="fa fa-check"></i>Objetivo del diseño experimental</a></li>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#población-y-muestra"><i class="fa fa-check"></i>Población y muestra</a></li>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#medidas-y-escalas-de-medida"><i class="fa fa-check"></i>Medidas y escalas de medida</a></li>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#parámetros-poblacionales-y-estadísticos"><i class="fa fa-check"></i>Parámetros poblacionales y estadísticos</a></li>
</ul></li>
<li><a href="antes-de-empezar.html#primeros-pasos-con-r-y-rstudio">Primeros pasos con <code>R</code> y <code>RStudio</code></a>
<ul>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#instalación-y-puesta-en-marcha"><i class="fa fa-check"></i>Instalación y puesta en marcha</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="antes-de-empezar.html"><a href="antes-de-empezar.html#informes-prediseñados"><i class="fa fa-check"></i>Informes prediseñados</a></li>
<li><a href="antes-de-empezar.html#librerías-de-r-necesarías">Librerías de <code>R</code> necesarías</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#conceptos-básicos"><i class="fa fa-check"></i><b>1.1</b> Conceptos básicos</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#objetivo-del-diseño-experimental-1"><i class="fa fa-check"></i><b>1.1.1</b> Objetivo del diseño experimental</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#población-y-muestra-1"><i class="fa fa-check"></i><b>1.1.2</b> Población y muestra</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#medidas-y-escalas-de-medida-1"><i class="fa fa-check"></i><b>1.1.3</b> Medidas y escalas de medida</a></li>
<li class="chapter" data-level="1.1.4" data-path="intro.html"><a href="intro.html#parámetros-poblacionales-y-estadísticos-1"><i class="fa fa-check"></i><b>1.1.4</b> Parámetros poblacionales y estadísticos</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#ejercicios"><i class="fa fa-check"></i><b>1.2</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="aed.html"><a href="aed.html"><i class="fa fa-check"></i><b>2</b> Análisis exploratorio de datos</a></li>
<li class="chapter" data-level="3" data-path="objetivos.html"><a href="objetivos.html"><i class="fa fa-check"></i><b>3</b> Objetivos</a></li>
<li class="chapter" data-level="4" data-path="variabilidad.html"><a href="variabilidad.html"><i class="fa fa-check"></i><b>4</b> Variabilidad</a></li>
<li class="chapter" data-level="5" data-path="procesado-inicial.html"><a href="procesado-inicial.html"><i class="fa fa-check"></i><b>5</b> Procesado inicial</a>
<ul>
<li class="chapter" data-level="5.1" data-path="procesado-inicial.html"><a href="procesado-inicial.html#operaciones-con-sujetos"><i class="fa fa-check"></i><b>5.1</b> Operaciones con sujetos</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="procesado-inicial.html"><a href="procesado-inicial.html#filtrado"><i class="fa fa-check"></i><b>5.1.1</b> Filtrado</a></li>
<li class="chapter" data-level="5.1.2" data-path="procesado-inicial.html"><a href="procesado-inicial.html#ordenación"><i class="fa fa-check"></i><b>5.1.2</b> Ordenación</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="procesado-inicial.html"><a href="procesado-inicial.html#trabajando-con-variables"><i class="fa fa-check"></i><b>5.2</b> Trabajando con variables</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="procesado-inicial.html"><a href="procesado-inicial.html#selección"><i class="fa fa-check"></i><b>5.2.1</b> Selección</a></li>
<li class="chapter" data-level="5.2.2" data-path="procesado-inicial.html"><a href="procesado-inicial.html#creación"><i class="fa fa-check"></i><b>5.2.2</b> Creación</a></li>
<li class="chapter" data-level="5.2.3" data-path="procesado-inicial.html"><a href="procesado-inicial.html#creación-de-factores"><i class="fa fa-check"></i><b>5.2.3</b> Creación de factores</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="procesado-inicial.html"><a href="procesado-inicial.html#reuniendo-los-datos"><i class="fa fa-check"></i><b>5.3</b> Reuniendo los datos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html"><i class="fa fa-check"></i><b>6</b> Análisis Descriptivo inicial</a>
<ul>
<li class="chapter" data-level="6.1" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#una-variable-factor"><i class="fa fa-check"></i><b>6.1</b> Una variable factor</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#resúmenes-numéricos"><i class="fa fa-check"></i><b>6.1.1</b> Resúmenes numéricos</a></li>
<li class="chapter" data-level="6.1.2" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#visualización-gráfica"><i class="fa fa-check"></i><b>6.1.2</b> Visualización gráfica</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#una-variable-numérica"><i class="fa fa-check"></i><b>6.2</b> Una variable numérica</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#resúmenes-numéricos-1"><i class="fa fa-check"></i><b>6.2.1</b> Resúmenes numéricos</a></li>
<li class="chapter" data-level="6.2.2" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#visualización-gráfica-1"><i class="fa fa-check"></i><b>6.2.2</b> Visualización gráfica</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#dos-variables-categóricas"><i class="fa fa-check"></i><b>6.3</b> Dos variables categóricas</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#resúmenes-numéricos-2"><i class="fa fa-check"></i><b>6.3.1</b> Resúmenes numéricos</a></li>
<li class="chapter" data-level="6.3.2" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#visualización-gráfica-2"><i class="fa fa-check"></i><b>6.3.2</b> Visualización gráfica</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#categórica-vs-numérica"><i class="fa fa-check"></i><b>6.4</b> Categórica vs Numérica</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#resúmenes-numéricos-3"><i class="fa fa-check"></i><b>6.4.1</b> Resúmenes numéricos</a></li>
<li class="chapter" data-level="6.4.2" data-path="análisis-descriptivo-inicial.html"><a href="análisis-descriptivo-inicial.html#visualización-gráfica-3"><i class="fa fa-check"></i><b>6.4.2</b> Visualización gráfica</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Creado con bookdown</a></li>
<li><a href="https://sites.google.com/umh.es/statistical-models" target="blank">Modelos Estadísticos</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modelos Estadísticos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="procesado-inicial" class="section level1" number="5">
<h1><span class="header-section-number">Unidad 5</span> Procesado inicial</h1>
<p>La descripción numérica y la visualización gráfica son las herramientas más importantes en los pasos iniciales para la generación de conocimiento sobre los datos experimentales, pero en ocasiones los datos no son recogidos en la forma más efectiva para realizar dichos análisis. A menudo se necesitara crear algunas variables o resúmenes nuevos, o tal vez solo se quiera cambiar el nombre de las variables o reordenar las observaciones para facilitar el trabajo de los datos. En este tema aprenderemos cómo hacer todo eso. Para ejemplificar los procedimientos utilizaremos el conjunto de datos <code>flights</code> contenido en la librería <code>nycflights13</code>, que contiene toda la información sobre los vuelos que salieron desde la ciudad de Nueva York en 2013.</p>
<p>Las variables que contiene este banco de datos (336776 observaciones = vuelos) son:</p>
<ul>
<li><strong>year</strong>: Fecha de salida (año).</li>
<li><strong>month</strong>: Fecha de salida (mes).</li>
<li><strong>year,month,day</strong>: Fecha de salida (día).</li>
<li><strong>dep_time</strong>: Hora real de salida.</li>
<li><strong>arr_time</strong>: Hora real de llegada (en horario de la ciudad de llegada).</li>
<li><strong>sched_dep_time</strong>: Hora programada de salida. (Esta variable debe coincidir con la información de las variables hour y minute)</li>
<li><strong>sched_arr_time</strong>: Hora programada de llegada (en horario de la ciudad de llegada).</li>
<li><strong>dep_delay</strong>: Demora de salida (en minutos). Los tiempos negativos representan salidas tempranas.</li>
<li><strong>arr_delay</strong>: Demora de llegada (en minutos). Los tiempos negativos representan llegadas tempranas.</li>
<li><strong>hour</strong>: Hora de partida programada.</li>
<li><strong>minute</strong>: Minuto de partida programada.</li>
<li><strong>carrier</strong>: Aerolínea encargada del vuelo</li>
<li><strong>tailnum</strong>: Identificador del avión</li>
<li><strong>flight</strong>: Identificador del vuelo</li>
<li><strong>origin</strong>: Origen del vuelo</li>
<li><strong>dest</strong>: Destino del vuelo</li>
<li><strong>air_time</strong>: Tiempo de vuelo (en minutos)</li>
<li><strong>distance</strong>: Distancia entre los dos aeropuertos (en millas)</li>
<li><strong>time_hour</strong>: Fecha y hora programadas del vuelo como una fecha POSIXct. Junto con el origen, se puede usar para unir datos de vuelos a datos meteorológicos.</li>
</ul>
<blockquote>
<p>Recuerda que debes instalar dicha librería antes de poder reproducir todo los procedimientos que mostramos en las secciones siguientes.</p>
</blockquote>
<p>Instalamos la librería (junto con todas las necesarias para la asignatura) y cargamos los datos para poder visualizarlos:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="procesado-inicial.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code></pre></div>
<p>Código para cargar y visualizar los datos</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="procesado-inicial.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga de datos</span></span>
<span id="cb16-2"><a href="procesado-inicial.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(flights)</span>
<span id="cb16-3"><a href="procesado-inicial.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualización de los 10 primeros casos</span></span>
<span id="cb16-4"><a href="procesado-inicial.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb16-5"><a href="procesado-inicial.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(flights,<span class="dv">10</span>), <span class="at">align =</span> <span class="st">&#39;c&#39;</span>, <span class="at">booktabs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb16-6"><a href="procesado-inicial.html#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&#39;Datos flights de la librería nycflights13.&#39;</span>)</span></code></pre></div>
<p>Tambien podemos ver la estructura (tipo de variables) del banco de datos. Los tipos de variables que se admiten en R son: <code>int</code> para enteros, <code>dbl</code> para números reales, <code>chr</code> para vectores de caracteres o cadenas, <code>dttm</code> para fechas-tiempos (una fecha + una hora), <code>lgl</code> para vectores lógicos que solo contienen VERDADERO o FALSO, <code>fctr</code> para factores (que R usa para representar variables categóricas con valores posibles fijos), y <code>date</code> para fechas.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="procesado-inicial.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualización de la estructura del banco de datos</span></span>
<span id="cb17-2"><a href="procesado-inicial.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flights)</span></code></pre></div>
<pre><code>## tibble [336,776 × 19] (S3: tbl_df/tbl/data.frame)
##  $ year          : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month         : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ day           : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ dep_time      : int [1:336776] 517 533 542 544 554 554 555 557 557 558 ...
##  $ sched_dep_time: int [1:336776] 515 529 540 545 600 558 600 600 600 600 ...
##  $ dep_delay     : num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_time      : int [1:336776] 830 850 923 1004 812 740 913 709 838 753 ...
##  $ sched_arr_time: int [1:336776] 819 830 850 1022 837 728 854 723 846 745 ...
##  $ arr_delay     : num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ carrier       : chr [1:336776] &quot;UA&quot; &quot;UA&quot; &quot;AA&quot; &quot;B6&quot; ...
##  $ flight        : int [1:336776] 1545 1714 1141 725 461 1696 507 5708 79 301 ...
##  $ tailnum       : chr [1:336776] &quot;N14228&quot; &quot;N24211&quot; &quot;N619AA&quot; &quot;N804JB&quot; ...
##  $ origin        : chr [1:336776] &quot;EWR&quot; &quot;LGA&quot; &quot;JFK&quot; &quot;JFK&quot; ...
##  $ dest          : chr [1:336776] &quot;IAH&quot; &quot;IAH&quot; &quot;MIA&quot; &quot;BQN&quot; ...
##  $ air_time      : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...
##  $ distance      : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ hour          : num [1:336776] 5 5 5 5 6 5 6 6 6 6 ...
##  $ minute        : num [1:336776] 15 29 40 45 0 58 0 0 0 0 ...
##  $ time_hour     : POSIXct[1:336776], format: &quot;2013-01-01 05:00:00&quot; &quot;2013-01-01 05:00:00&quot; ...</code></pre>
<div id="operaciones-con-sujetos" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Operaciones con sujetos</h2>
<p>Los procedimientos para el trabajo con los sujetos de nuestra muestra se reducen al filtrado u ordenación, para quedarnos con un subconjunto de sujetos o para organizar su visualización en otra forma.</p>
<div id="filtrado" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Filtrado</h3>
<p>Usamos el filtrado para seleccionar un subconjunto de observaciones del data.frame que contiene nuestros datos. Esto se hace a menudo cuando queremos limitar un análisis a un subconjunto de observaciones. El uso básico del filtro se hace mediante la función <code>filter()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="procesado-inicial.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(data_set, <span class="sc">&lt;</span>expression1<span class="sc">&gt;</span>, <span class="sc">&lt;</span>expression2<span class="sc">&gt;</span>, ...)</span></code></pre></div>
<p>donde <code>data_set</code> es el nombre del objeto que contiene nuestros datos y <code>&lt;expression1&gt;, &lt;expression2&gt;,...</code>son uno o más argumentos adicionales, donde cada uno de estos es una expresión de R válida que implica una o más condiciones a aplicar sobre las variables del conjunto de datos. Cada expresión se interpreta como una condición lógica (verdadero o falso).</p>
<p>Para usar el filtrado de manera efectiva, se debe saber cómo seleccionar las observaciones que se desea utilizando los operadores de comparación. R proporciona el paquete estándar: <code>&gt;</code> (mayor que), <code>&gt;=</code> (mayor o igual que), <code>&lt;</code> (menor que), <code>&lt;=</code> (menor o igual que), <code>!=</code> (no igual a), y <code>==</code> (igual a).</p>
<p>Veamos diferentes posibilidades de filtrado sobre el banco de datos <code>flights</code>. En primer lugar filtramos todos los vuelos cuya día de origen sea el 1 de enero de 2013. El resultado es un conjunto de datos con 842 observaciones donde aparece la información de dichos vuelos. Almacenamos el resultado eb nuevo objeto y calculamos el tamaño (nñumero de sujetos) con la función <code>dim</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="procesado-inicial.html#cb20-1" aria-hidden="true" tabindex="-1"></a>jan1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb20-2"><a href="procesado-inicial.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(jan1)</span></code></pre></div>
<pre><code>## [1] 842  19</code></pre>
<p>Podemos combinar diferentes condiciones de filtrado mediante los operadores lógicos <code>&amp;</code> es “y” (condición 1 y condición 2), <code>|</code> es “o” (condición 1 o condición 2). Seleccionamos ahora todos los vuelos con mes de origen igual a Noviembre o Diciembre.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="procesado-inicial.html#cb22-1" aria-hidden="true" tabindex="-1"></a>nov_dec <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, month <span class="sc">==</span> <span class="dv">11</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="dv">12</span>)</span>
<span id="cb22-2"><a href="procesado-inicial.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(nov_dec) <span class="co"># Para saber cuantas observaciones contiene el banco de datos filtrado </span></span></code></pre></div>
<pre><code>## [1] 55403    19</code></pre>
<p>Los datos filtrados contienen la información completa de 55403 vuelos. Otra forma de conseguir el mismo resultado es con el operador <code>%in%</code></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="procesado-inicial.html#cb24-1" aria-hidden="true" tabindex="-1"></a>nov_dec <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span>
<span id="cb24-2"><a href="procesado-inicial.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(nov_dec)</span></code></pre></div>
<pre><code>## [1] 55403    19</code></pre>
<p>A veces se pueden simplificar condiciones de filtrado más complicadas sin más que recordar la ley de De Morgan: <code>!(x &amp; y) es lo mismo que</code>!x | !y<code>,  y</code>!(x | y)<code>es lo mismo que</code>!x &amp; !y`. Por ejemplo, si se desean obtener todos vuelos que no se retrasaron (en llegada o partida) en más de dos horas, se pueden usar cualquiera de los dos filtros siguientes:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="procesado-inicial.html#cb26-1" aria-hidden="true" tabindex="-1"></a>db_sel1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, <span class="sc">!</span>(arr_delay <span class="sc">&gt;</span> <span class="dv">120</span> <span class="sc">|</span> dep_delay <span class="sc">&gt;</span> <span class="dv">120</span>))</span>
<span id="cb26-2"><a href="procesado-inicial.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(db_sel1)</span></code></pre></div>
<pre><code>## [1] 316050     19</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="procesado-inicial.html#cb28-1" aria-hidden="true" tabindex="-1"></a>db_sel2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, arr_delay <span class="sc">&lt;=</span> <span class="dv">120</span>, dep_delay <span class="sc">&lt;=</span> <span class="dv">120</span>)</span>
<span id="cb28-2"><a href="procesado-inicial.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(db_sel2)</span></code></pre></div>
<pre><code>## [1] 316050     19</code></pre>
</div>
<div id="ordenación" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Ordenación</h3>
<p>Otro procesamiento muy habitual con los sujetos es reordenar las filas de un objeto que contiene nuestros datos. Esto se usa cuando queremos inspeccionar un conjunto de datos para buscar asociaciones entre las diferentes variables, lo que resulta difícil de hacer si no están ordenados. Para realizar la ordenación se utiliza la función <code>arrange()</code>. El uso básico de la función es:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="procesado-inicial.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(data_set, varname1, varname2, ...)</span></code></pre></div>
<p>donde <code>data_set</code> es el nombre del objeto que contiene nuestros datos y <code>varname1, varname2,...</code> son las variables que vamos a utilizar para la ordenación. Por ejemplo deseamos ordenar nuestro datos siguiendo el orden año, mes y día:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="procesado-inicial.html#cb31-1" aria-hidden="true" tabindex="-1"></a>dbf_ord1 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(flights, year, month, day)</span>
<span id="cb31-2"><a href="procesado-inicial.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_ord1)</span></code></pre></div>
<pre><code>## tibble [336,776 × 19] (S3: tbl_df/tbl/data.frame)
##  $ year          : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month         : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ day           : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ dep_time      : int [1:336776] 517 533 542 544 554 554 555 557 557 558 ...
##  $ sched_dep_time: int [1:336776] 515 529 540 545 600 558 600 600 600 600 ...
##  $ dep_delay     : num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_time      : int [1:336776] 830 850 923 1004 812 740 913 709 838 753 ...
##  $ sched_arr_time: int [1:336776] 819 830 850 1022 837 728 854 723 846 745 ...
##  $ arr_delay     : num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ carrier       : chr [1:336776] &quot;UA&quot; &quot;UA&quot; &quot;AA&quot; &quot;B6&quot; ...
##  $ flight        : int [1:336776] 1545 1714 1141 725 461 1696 507 5708 79 301 ...
##  $ tailnum       : chr [1:336776] &quot;N14228&quot; &quot;N24211&quot; &quot;N619AA&quot; &quot;N804JB&quot; ...
##  $ origin        : chr [1:336776] &quot;EWR&quot; &quot;LGA&quot; &quot;JFK&quot; &quot;JFK&quot; ...
##  $ dest          : chr [1:336776] &quot;IAH&quot; &quot;IAH&quot; &quot;MIA&quot; &quot;BQN&quot; ...
##  $ air_time      : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...
##  $ distance      : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ hour          : num [1:336776] 5 5 5 5 6 5 6 6 6 6 ...
##  $ minute        : num [1:336776] 15 29 40 45 0 58 0 0 0 0 ...
##  $ time_hour     : POSIXct[1:336776], format: &quot;2013-01-01 05:00:00&quot; &quot;2013-01-01 05:00:00&quot; ...</code></pre>
<p>Podemos introducir la función <code>desc()</code> para ordenar de forma descendente por la variable seleccionada. Ordenamos nuestros datos (de mayor a menor) por la demora en el tiempo de llegada:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="procesado-inicial.html#cb33-1" aria-hidden="true" tabindex="-1"></a>dbf_ord2 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(flights, <span class="fu">desc</span>(arr_delay))</span>
<span id="cb33-2"><a href="procesado-inicial.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_ord2)</span></code></pre></div>
<pre><code>## tibble [336,776 × 19] (S3: tbl_df/tbl/data.frame)
##  $ year          : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month         : int [1:336776] 1 6 1 9 7 4 3 7 12 5 ...
##  $ day           : int [1:336776] 9 15 10 20 22 10 17 22 5 3 ...
##  $ dep_time      : int [1:336776] 641 1432 1121 1139 845 1100 2321 2257 756 1133 ...
##  $ sched_dep_time: int [1:336776] 900 1935 1635 1845 1600 1900 810 759 1700 2055 ...
##  $ dep_delay     : num [1:336776] 1301 1137 1126 1014 1005 ...
##  $ arr_time      : int [1:336776] 1242 1607 1239 1457 1044 1342 135 121 1058 1250 ...
##  $ sched_arr_time: int [1:336776] 1530 2120 1810 2210 1815 2211 1020 1026 2020 2215 ...
##  $ arr_delay     : num [1:336776] 1272 1127 1109 1007 989 ...
##  $ carrier       : chr [1:336776] &quot;HA&quot; &quot;MQ&quot; &quot;MQ&quot; &quot;AA&quot; ...
##  $ flight        : int [1:336776] 51 3535 3695 177 3075 2391 2119 2047 172 3744 ...
##  $ tailnum       : chr [1:336776] &quot;N384HA&quot; &quot;N504MQ&quot; &quot;N517MQ&quot; &quot;N338AA&quot; ...
##  $ origin        : chr [1:336776] &quot;JFK&quot; &quot;JFK&quot; &quot;EWR&quot; &quot;JFK&quot; ...
##  $ dest          : chr [1:336776] &quot;HNL&quot; &quot;CMH&quot; &quot;ORD&quot; &quot;SFO&quot; ...
##  $ air_time      : num [1:336776] 640 74 111 354 96 139 167 109 149 112 ...
##  $ distance      : num [1:336776] 4983 483 719 2586 589 ...
##  $ hour          : num [1:336776] 9 19 16 18 16 19 8 7 17 20 ...
##  $ minute        : num [1:336776] 0 35 35 45 0 0 10 59 0 55 ...
##  $ time_hour     : POSIXct[1:336776], format: &quot;2013-01-09 09:00:00&quot; &quot;2013-06-15 19:00:00&quot; ...</code></pre>
<p>En el resumen de los datos presentados se pueden apreciar las diferencia entre los datos ordenados de una u otra forma.</p>
</div>
</div>
<div id="trabajando-con-variables" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Trabajando con variables</h2>
<p>Los procedimientos para el trabajo con las variables de nuestra muestra se reducen a la selección de un subconjunto de variables, la creación de nuevas variables, el renombrado de variables, y la recodificación en nuevas variables.</p>
<div id="selección" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Selección</h3>
<p>Usamos la función <code>select()</code> para seleccionar un subconjunto de variables de nuestro banco de datos. Esto función se usa cuando tenemos un conjunto de datos con muchas variables, pero solo necesitamos trabajar con un subconjunto de ellas. La función tiene la estructura:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="procesado-inicial.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(data_set, varname1, varname2, ...)</span></code></pre></div>
<p>El primer argumento, <code>data_set</code>, es el nombre del objeto que contiene nuestros datos. A continuación incluimos una serie de uno o más argumentos adicionales, donde cada uno es el nombre de una o más variables en el conjunto de datos. Estas son las variables que aparecerán en el nuevo banco de datos.</p>
<p>Para el conjunto de datos <code>flights</code> vamos a seleccionar las variables <code>year</code>, <code>month</code>, y <code>day</code>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="procesado-inicial.html#cb36-1" aria-hidden="true" tabindex="-1"></a>dbf_sel1 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(flights, year, month, day)</span>
<span id="cb36-2"><a href="procesado-inicial.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># indicamos la libreria por la coincidencia de la función select()</span></span>
<span id="cb36-3"><a href="procesado-inicial.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># en otra libreria cargada</span></span>
<span id="cb36-4"><a href="procesado-inicial.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_sel1) </span></code></pre></div>
<pre><code>## tibble [336,776 × 3] (S3: tbl_df/tbl/data.frame)
##  $ year : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month: int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ day  : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>A veces es más conveniente establecer la selección especificando aquellas que no necesitamos, en lugar de especificar cuáles guardar. Usamos el operador <code>-</code> para indicar que variables deben ser eliminadas.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="procesado-inicial.html#cb38-1" aria-hidden="true" tabindex="-1"></a>dbf_sel2 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(flights, <span class="sc">-</span>(year<span class="sc">:</span>day)) </span>
<span id="cb38-2"><a href="procesado-inicial.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># No seleccionamos las varaibles que se encuentran entre las variables year y day</span></span>
<span id="cb38-3"><a href="procesado-inicial.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_sel2)</span></code></pre></div>
<pre><code>## tibble [336,776 × 16] (S3: tbl_df/tbl/data.frame)
##  $ dep_time      : int [1:336776] 517 533 542 544 554 554 555 557 557 558 ...
##  $ sched_dep_time: int [1:336776] 515 529 540 545 600 558 600 600 600 600 ...
##  $ dep_delay     : num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_time      : int [1:336776] 830 850 923 1004 812 740 913 709 838 753 ...
##  $ sched_arr_time: int [1:336776] 819 830 850 1022 837 728 854 723 846 745 ...
##  $ arr_delay     : num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ carrier       : chr [1:336776] &quot;UA&quot; &quot;UA&quot; &quot;AA&quot; &quot;B6&quot; ...
##  $ flight        : int [1:336776] 1545 1714 1141 725 461 1696 507 5708 79 301 ...
##  $ tailnum       : chr [1:336776] &quot;N14228&quot; &quot;N24211&quot; &quot;N619AA&quot; &quot;N804JB&quot; ...
##  $ origin        : chr [1:336776] &quot;EWR&quot; &quot;LGA&quot; &quot;JFK&quot; &quot;JFK&quot; ...
##  $ dest          : chr [1:336776] &quot;IAH&quot; &quot;IAH&quot; &quot;MIA&quot; &quot;BQN&quot; ...
##  $ air_time      : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...
##  $ distance      : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ hour          : num [1:336776] 5 5 5 5 6 5 6 6 6 6 ...
##  $ minute        : num [1:336776] 15 29 40 45 0 58 0 0 0 0 ...
##  $ time_hour     : POSIXct[1:336776], format: &quot;2013-01-01 05:00:00&quot; &quot;2013-01-01 05:00:00&quot; ...</code></pre>
<p>Cuando las variables que deseamos eliminar no se muestran de forma consecutiva en nuestro banco de datos podemos utilizar una expresión equivalente</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="procesado-inicial.html#cb40-1" aria-hidden="true" tabindex="-1"></a>dbf_sel3 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(flights, <span class="sc">-</span><span class="fu">c</span>(year,month,day)) </span>
<span id="cb40-2"><a href="procesado-inicial.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_sel3)</span></code></pre></div>
<pre><code>## tibble [336,776 × 16] (S3: tbl_df/tbl/data.frame)
##  $ dep_time      : int [1:336776] 517 533 542 544 554 554 555 557 557 558 ...
##  $ sched_dep_time: int [1:336776] 515 529 540 545 600 558 600 600 600 600 ...
##  $ dep_delay     : num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_time      : int [1:336776] 830 850 923 1004 812 740 913 709 838 753 ...
##  $ sched_arr_time: int [1:336776] 819 830 850 1022 837 728 854 723 846 745 ...
##  $ arr_delay     : num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ carrier       : chr [1:336776] &quot;UA&quot; &quot;UA&quot; &quot;AA&quot; &quot;B6&quot; ...
##  $ flight        : int [1:336776] 1545 1714 1141 725 461 1696 507 5708 79 301 ...
##  $ tailnum       : chr [1:336776] &quot;N14228&quot; &quot;N24211&quot; &quot;N619AA&quot; &quot;N804JB&quot; ...
##  $ origin        : chr [1:336776] &quot;EWR&quot; &quot;LGA&quot; &quot;JFK&quot; &quot;JFK&quot; ...
##  $ dest          : chr [1:336776] &quot;IAH&quot; &quot;IAH&quot; &quot;MIA&quot; &quot;BQN&quot; ...
##  $ air_time      : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...
##  $ distance      : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ hour          : num [1:336776] 5 5 5 5 6 5 6 6 6 6 ...
##  $ minute        : num [1:336776] 15 29 40 45 0 58 0 0 0 0 ...
##  $ time_hour     : POSIXct[1:336776], format: &quot;2013-01-01 05:00:00&quot; &quot;2013-01-01 05:00:00&quot; ...</code></pre>
</div>
<div id="creación" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Creación</h3>
<p>En la creación de variables a partir de las originales en nuestros datos tenemos dos opciones: i) crear una nueva variable sin eliminar las variables originales, ii) crear una nueva variable eliminando las variables originales.</p>
<p>Usamos la función <code>mutate()</code> para crear nuevas variables en nuestro banco de datos sin eliminar las variables que forman parte de la nueva variable. La función tiene la estructura:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="procesado-inicial.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(data_set, <span class="sc">&lt;</span>expression1<span class="sc">&gt;</span>, <span class="sc">&lt;</span>expression2<span class="sc">&gt;</span>, ...)</span></code></pre></div>
<p>El primer argumento, <code>data_set</code>, es el nombre del objeto que contiene nuestros datos. A continuación incluimos una serie de uno o más argumentos adicionales, donde cada uno es la expresión para la nueva o nuevas variables.</p>
<p>Veamos un ejemplo de uso de la función</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="procesado-inicial.html#cb43-1" aria-hidden="true" tabindex="-1"></a>dbf_sel4 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(flights, <span class="fu">c</span>(year,month,day,dep_delay,arr_delay,distance,air_time)) </span>
<span id="cb43-2"><a href="procesado-inicial.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionamos un subconjunto de las variables originales</span></span>
<span id="cb43-3"><a href="procesado-inicial.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_sel4)</span></code></pre></div>
<pre><code>## tibble [336,776 × 7] (S3: tbl_df/tbl/data.frame)
##  $ year     : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month    : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ day      : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ dep_delay: num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_delay: num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ distance : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ air_time : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="procesado-inicial.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos una varaible que indica la reducción de demora entre salida y llegada</span></span>
<span id="cb45-2"><a href="procesado-inicial.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la velocidad del viaje</span></span>
<span id="cb45-3"><a href="procesado-inicial.html#cb45-3" aria-hidden="true" tabindex="-1"></a>dbf_new <span class="ot">&lt;-</span> <span class="fu">mutate</span>(dbf_sel4,</span>
<span id="cb45-4"><a href="procesado-inicial.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay,</span>
<span id="cb45-5"><a href="procesado-inicial.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">speed =</span> distance <span class="sc">/</span> air_time <span class="sc">*</span> <span class="dv">60</span></span>
<span id="cb45-6"><a href="procesado-inicial.html#cb45-6" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb45-7"><a href="procesado-inicial.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_new)</span></code></pre></div>
<pre><code>## tibble [336,776 × 9] (S3: tbl_df/tbl/data.frame)
##  $ year     : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month    : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ day      : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ dep_delay: num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_delay: num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ distance : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ air_time : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...
##  $ gain     : num [1:336776] 9 16 31 -17 -19 16 24 -11 -5 10 ...
##  $ speed    : num [1:336776] 370 374 408 517 394 ...</code></pre>
<p>Podemos ver que se han añadido las dos variables en el nuevo banco de datos que se ha creado. Una ventaja de esta función es que resulta posible crear nuevas variables a partir de las nuevas creadas</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="procesado-inicial.html#cb47-1" aria-hidden="true" tabindex="-1"></a>dbf_new2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(dbf_sel4,</span>
<span id="cb47-2"><a href="procesado-inicial.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay,</span>
<span id="cb47-3"><a href="procesado-inicial.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">hours =</span> air_time <span class="sc">/</span> <span class="dv">60</span>,</span>
<span id="cb47-4"><a href="procesado-inicial.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">gain_per_hour =</span> gain <span class="sc">/</span> hours</span>
<span id="cb47-5"><a href="procesado-inicial.html#cb47-5" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb47-6"><a href="procesado-inicial.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_new2)</span></code></pre></div>
<pre><code>## tibble [336,776 × 10] (S3: tbl_df/tbl/data.frame)
##  $ year         : int [1:336776] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 ...
##  $ month        : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ day          : int [1:336776] 1 1 1 1 1 1 1 1 1 1 ...
##  $ dep_delay    : num [1:336776] 2 4 2 -1 -6 -4 -5 -3 -3 -2 ...
##  $ arr_delay    : num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...
##  $ distance     : num [1:336776] 1400 1416 1089 1576 762 ...
##  $ air_time     : num [1:336776] 227 227 160 183 116 150 158 53 140 138 ...
##  $ gain         : num [1:336776] 9 16 31 -17 -19 16 24 -11 -5 10 ...
##  $ hours        : num [1:336776] 3.78 3.78 2.67 3.05 1.93 ...
##  $ gain_per_hour: num [1:336776] 2.38 4.23 11.62 -5.57 -9.83 ...</code></pre>
<p>Usamos la función <code>transmute()</code> para crear un banco de datos donde solo aparecen las nuevas variables creadas. La estructura de la función es idéntica a la de la función <code>mutate()</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="procesado-inicial.html#cb49-1" aria-hidden="true" tabindex="-1"></a>dbf_new3 <span class="ot">&lt;-</span> <span class="fu">transmute</span>(dbf_sel4,</span>
<span id="cb49-2"><a href="procesado-inicial.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay,</span>
<span id="cb49-3"><a href="procesado-inicial.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">hours =</span> air_time <span class="sc">/</span> <span class="dv">60</span>,</span>
<span id="cb49-4"><a href="procesado-inicial.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">gain_per_hour =</span> gain <span class="sc">/</span> hours</span>
<span id="cb49-5"><a href="procesado-inicial.html#cb49-5" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb49-6"><a href="procesado-inicial.html#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dbf_new3)</span></code></pre></div>
<pre><code>## tibble [336,776 × 3] (S3: tbl_df/tbl/data.frame)
##  $ gain         : num [1:336776] 9 16 31 -17 -19 16 24 -11 -5 10 ...
##  $ hours        : num [1:336776] 3.78 3.78 2.67 3.05 1.93 ...
##  $ gain_per_hour: num [1:336776] 2.38 4.23 11.62 -5.57 -9.83 ...</code></pre>
<p>El listado de funciones que podemos usar con las funciones <code>mutate()</code> y <code>transmute()</code> son:</p>
<ul>
<li>Operadores aritméticos: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code></li>
<li>Funciones logaritmo: <code>log()</code>, <code>log2()</code>, <code>log10()</code></li>
<li>Funciones de agregación: <code>cumsum()</code> (suma acumulada), <code>cumprod()</code> (producto acumulado), <code>cummin()</code> (mínimo acumulado), <code>cummax()</code> (máximo acumulado), <code>cummean()</code> (media acumulada).</li>
<li>Comparaciones lógicas: <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code></li>
</ul>
</div>
<div id="creación-de-factores" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Creación de factores</h3>
<p>La creación de variables tipo factor es un aspecto muy importante en el análisis de datos. Existen tres formas principales de conseguir variables de tipo factor:</p>
<ol style="list-style-type: decimal">
<li>A partir de variables tipo carácter</li>
<li>A partir de variables de tipo entero que pueden identificar niveles de una variable</li>
<li>A partir de una variable de tipo numérico.</li>
</ol>
<p>Por el momento solo mostraremos las opciones 1 y 2. La función utilizada para estas operaciones es <code>fct_recode()</code> cuya estructura viene dada por:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="procesado-inicial.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fct_recode</span>(varfactor, <span class="at">levelnew1=</span>levelold1, <span class="at">levelnew2=</span>levelold2, ...)</span></code></pre></div>
<p>donde <code>varfactor</code> es la variable factor original, <code>levelnew</code> son los niveles del factor recodificados y <code>levelold</code> son los niveles del factor en la variable original.</p>
<p>Vamos a ver un ejemplo de su uso sobre el banco de datos NCBIRTH800 que presentamos en la unidad anterior. Cargamos los datos desde el repositorio y vemos su estructura:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="procesado-inicial.html#cb52-1" aria-hidden="true" tabindex="-1"></a>NCBIRTH800<span class="ot">=</span><span class="fu">read_csv</span>(<span class="st">&quot;https://goo.gl/mB9Jcn&quot;</span>, <span class="at">col_types =</span> <span class="st">&quot;dcddcccdccddcc&quot;</span>)</span></code></pre></div>
<p>En esta base de datos hay varias variables que se han recogido como carácter (aunque se les ha asignado un código numérico). A continuación se presentan dichas variables así como la asignación de valor a cada uno de los códigos numéricos:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="procesado-inicial.html#cb53-1" aria-hidden="true" tabindex="-1"></a>sex<span class="sc">:</span> <span class="st">&quot;male&quot;</span> <span class="ot">=</span> <span class="dv">1</span>,<span class="st">&quot;female&quot;</span> <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb53-2"><a href="procesado-inicial.html#cb53-2" aria-hidden="true" tabindex="-1"></a>marital<span class="sc">:</span> <span class="st">&quot;married&quot;</span> <span class="ot">=</span> <span class="dv">1</span>,<span class="st">&quot;not married&quot;</span> <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb53-3"><a href="procesado-inicial.html#cb53-3" aria-hidden="true" tabindex="-1"></a>racemom<span class="sc">:</span> <span class="st">&quot;other non white&quot;</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">&quot;White&quot;</span> <span class="ot">=</span> <span class="dv">1</span>,<span class="st">&quot;Black&quot;</span> <span class="ot">=</span> <span class="dv">2</span>,</span>
<span id="cb53-4"><a href="procesado-inicial.html#cb53-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;America indian&quot;</span> <span class="ot">=</span> <span class="dv">3</span>,<span class="st">&quot;Chinese&quot;</span> <span class="ot">=</span> <span class="dv">4</span>,<span class="st">&quot;Hawaiian&quot;</span> <span class="ot">=</span> <span class="dv">5</span>,</span>
<span id="cb53-5"><a href="procesado-inicial.html#cb53-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;Filipino&quot;</span> <span class="ot">=</span> <span class="dv">6</span>,<span class="st">&quot;Other asian&quot;</span> <span class="ot">=</span> <span class="dv">7</span>, <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="dv">8</span></span>
<span id="cb53-6"><a href="procesado-inicial.html#cb53-6" aria-hidden="true" tabindex="-1"></a>hispmom<span class="sc">:</span> <span class="st">&quot;Cuban&quot;</span> <span class="ot">=</span> C, <span class="st">&quot;Mexican&quot;</span> <span class="ot">=</span> M, <span class="st">&quot;Non-Hispanic&quot;</span> <span class="ot">=</span> N ,</span>
<span id="cb53-7"><a href="procesado-inicial.html#cb53-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> O,<span class="st">&quot;Puerto Rican&quot;</span> <span class="ot">=</span> P, <span class="st">&quot;Central/South american&quot;</span> <span class="ot">=</span> S,</span>
<span id="cb53-8"><a href="procesado-inicial.html#cb53-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;U&quot;</span> <span class="ot">=</span> Not classificable</span>
<span id="cb53-9"><a href="procesado-inicial.html#cb53-9" aria-hidden="true" tabindex="-1"></a>smoke<span class="sc">:</span> <span class="st">&quot;Yes&quot;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb53-10"><a href="procesado-inicial.html#cb53-10" aria-hidden="true" tabindex="-1"></a>drink<span class="sc">:</span> <span class="st">&quot;Yes&quot;</span> <span class="ot">=</span> <span class="dv">1</span> ,<span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb53-11"><a href="procesado-inicial.html#cb53-11" aria-hidden="true" tabindex="-1"></a>low<span class="sc">:</span> <span class="st">&quot;Yes&quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb53-12"><a href="procesado-inicial.html#cb53-12" aria-hidden="true" tabindex="-1"></a>premie<span class="sc">:</span> <span class="st">&quot;Yes&quot;</span><span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="dv">0</span></span></code></pre></div>
<p>Realizamos la asignación de los valores</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="procesado-inicial.html#cb54-1" aria-hidden="true" tabindex="-1"></a>NCBIRTHnew <span class="ot">&lt;-</span> <span class="fu">mutate</span>(NCBIRTH800,      </span>
<span id="cb54-2"><a href="procesado-inicial.html#cb54-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">sex =</span> <span class="fu">fct_recode</span>(sex,<span class="st">&quot;male&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,<span class="st">&quot;female&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span>),</span>
<span id="cb54-3"><a href="procesado-inicial.html#cb54-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">marital =</span> <span class="fu">fct_recode</span>(marital,<span class="st">&quot;married&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,<span class="st">&quot;not married&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span>),</span>
<span id="cb54-4"><a href="procesado-inicial.html#cb54-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">racemom =</span> <span class="fu">fct_recode</span>(racemom,<span class="st">&quot;other non white&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>,<span class="st">&quot;White&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb54-5"><a href="procesado-inicial.html#cb54-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Black&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span>,<span class="st">&quot;America  indian&quot;</span> <span class="ot">=</span> <span class="st">&quot;3&quot;</span>,</span>
<span id="cb54-6"><a href="procesado-inicial.html#cb54-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Chinese&quot;</span> <span class="ot">=</span> <span class="st">&quot;4&quot;</span>,<span class="st">&quot;Hawaiian&quot;</span> <span class="ot">=</span> <span class="st">&quot;5&quot;</span>,<span class="st">&quot;Filipino&quot;</span> <span class="ot">=</span> <span class="st">&quot;6&quot;</span>,</span>
<span id="cb54-7"><a href="procesado-inicial.html#cb54-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Other asian&quot;</span> <span class="ot">=</span> <span class="st">&quot;7&quot;</span>,<span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;8&quot;</span>),</span>
<span id="cb54-8"><a href="procesado-inicial.html#cb54-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">hispmom =</span> <span class="fu">fct_recode</span>(hispmom,<span class="st">&quot;Cuban&quot;</span> <span class="ot">=</span> <span class="st">&quot;C&quot;</span>,<span class="st">&quot;Mexican&quot;</span> <span class="ot">=</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb54-9"><a href="procesado-inicial.html#cb54-9" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Non-Hispanic&quot;</span> <span class="ot">=</span> <span class="st">&quot;N&quot;</span>,<span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;O&quot;</span>,</span>
<span id="cb54-10"><a href="procesado-inicial.html#cb54-10" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Puerto Rican&quot;</span> <span class="ot">=</span> <span class="st">&quot;P&quot;</span>,<span class="st">&quot;Central/South american&quot;</span> <span class="ot">=</span> <span class="st">&quot;S&quot;</span>,</span>
<span id="cb54-11"><a href="procesado-inicial.html#cb54-11" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;U&quot;</span> <span class="ot">=</span> <span class="st">&quot;Not classificable&quot;</span>),</span>
<span id="cb54-12"><a href="procesado-inicial.html#cb54-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">smoke =</span> <span class="fu">fct_recode</span>(smoke,<span class="st">&quot;Yes&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,<span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>),</span>
<span id="cb54-13"><a href="procesado-inicial.html#cb54-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">drink =</span> <span class="fu">fct_recode</span>(drink,<span class="st">&quot;Yes&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,<span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>),</span>
<span id="cb54-14"><a href="procesado-inicial.html#cb54-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">low =</span> <span class="fu">fct_recode</span>(low,<span class="st">&quot;Yes&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,<span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>),</span>
<span id="cb54-15"><a href="procesado-inicial.html#cb54-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">premie =</span> <span class="fu">fct_recode</span>(premie,<span class="st">&quot;Yes&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,<span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb54-16"><a href="procesado-inicial.html#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(NCBIRTHnew)</span></code></pre></div>
<pre><code>## spec_tbl_df [800 × 14] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ plural : num [1:800] 1 1 1 1 1 1 1 1 1 1 ...
##  $ sex    : Factor w/ 2 levels &quot;male&quot;,&quot;female&quot;: 1 2 1 1 1 1 2 2 2 2 ...
##  $ mage   : num [1:800] 32 32 27 27 25 28 25 15 37 21 ...
##  $ weeks  : num [1:800] 40 37 39 39 39 43 39 42 41 39 ...
##  $ marital: Factor w/ 2 levels &quot;married&quot;,&quot;not married&quot;: 1 1 1 1 1 1 1 2 1 1 ...
##  $ racemom: Factor w/ 6 levels &quot;White&quot;,&quot;Black&quot;,..: 1 1 1 1 1 1 1 1 6 1 ...
##  $ hispmom: Factor w/ 6 levels &quot;Cuban&quot;,&quot;Mexican&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ gained : num [1:800] 38 34 12 15 32 32 75 25 31 28 ...
##  $ smoke  : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ drink  : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ tounces: num [1:800] 111 116 138 136 121 117 143 113 139 120 ...
##  $ tgrams : num [1:800] 3147 3289 3912 3856 3430 ...
##  $ low    : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ premie : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   plural = col_double(),
##   ..   sex = col_character(),
##   ..   mage = col_double(),
##   ..   weeks = col_double(),
##   ..   marital = col_character(),
##   ..   racemom = col_character(),
##   ..   hispmom = col_character(),
##   ..   gained = col_double(),
##   ..   smoke = col_character(),
##   ..   drink = col_character(),
##   ..   tounces = col_double(),
##   ..   tgrams = col_double(),
##   ..   low = col_character(),
##   ..   premie = col_character()
##   .. )</code></pre>
<p>En el resultado se aprecia la modificación de los diferentes factores.</p>
</div>
</div>
<div id="reuniendo-los-datos" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Reuniendo los datos</h2>
<p>Un problema bastante común que parece en la recogida de datos experimentales es que los nombres de las columnas de la base de datos no es una variable en si, sino los valores de una variable. Si tomamos como ejemplo el banco de datos <code>PCKDATA</code>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="procesado-inicial.html#cb56-1" aria-hidden="true" tabindex="-1"></a>PCKDATA <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://goo.gl/W8Bfgv&quot;</span>, <span class="at">col_types =</span> <span class="st">&quot;idd&quot;</span>)</span>
<span id="cb56-2"><a href="procesado-inicial.html#cb56-2" aria-hidden="true" tabindex="-1"></a>PCKDATA</span></code></pre></div>
<pre><code>## # A tibble: 1,005 × 3
##     SUBJ     A     B
##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1   193   250
##  2     2    90   173
##  3     3   120   135
##  4     4   154    49
##  5     5   149    83
##  6     6   146   123
##  7     7   180   126
##  8     8   128   177
##  9     9   180   164
## 10    10    66   121
## # … with 995 more rows</code></pre>
<p>Como se puede ver aparecen dos columnas indicando el tratamiento del sujeto, es decir, cada fila no identifica a un único sujeto. Por ese motivo en cada una de ellas aparece el valor del nivel de creatinina. Para poder trabajar de forma óptima cada fila debe contener la información única de cada sujeto. En este caso cada fila contiene la información de dos sujetos: el identificado como 1 en el tratamiento A y el identificado como 1 en el tratamiento B.</p>
<p>La función <code>gather()</code>nos permite reorganizar los datos de un banco de datos de forma muy sencilla. La estructura básica de la función es:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="procesado-inicial.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(data_set,var, <span class="at">key =</span> <span class="st">&quot;key&quot;</span>, <span class="at">value =</span> <span class="st">&quot;value&quot;</span>, ...)</span></code></pre></div>
<p>donde <code>data_set</code> es el banco de datos, var es el conjunto de variables que reorganizamos, <code>key</code> es el nombre de la variable donde reorganizamos las variables anteriores, y <code>value</code> es el nombre de la variable donde almacenamos los valores de respuesta. Para el conjunto de datos anterior tenemos:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="procesado-inicial.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(PCKDATA,<span class="st">`</span><span class="at">A</span><span class="st">`</span>,<span class="st">`</span><span class="at">B</span><span class="st">`</span>, <span class="at">key =</span> <span class="st">&quot;Grupo&quot;</span>, <span class="at">value =</span> creatine)</span></code></pre></div>
<pre><code>## # A tibble: 2,010 × 3
##     SUBJ Grupo creatine
##    &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1     1 A          193
##  2     2 A           90
##  3     3 A          120
##  4     4 A          154
##  5     5 A          149
##  6     6 A          146
##  7     7 A          180
##  8     8 A          128
##  9     9 A          180
## 10    10 A           66
## # … with 2,000 more rows</code></pre>
<p>Podemos ver que se han reorganizado las filas de la base de datos. De hecho se han duplicado el número de filas (hemos ampliado dos variables) y ahora cada columna identifica claramente la información de un sujeto.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="variabilidad.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="análisis-descriptivo-inicial.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["libroSTAT.pdf", "libroSTAT.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
